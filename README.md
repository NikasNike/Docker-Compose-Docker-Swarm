

**Первый вариант решение
Создаем два ДК-файла:

![1_1](homework/1_1.JPG)

![1_2](homework/1_2.JPG)

Компилируем node:

![1_3](homework/1_3.JPG)

Проверяем:

![1_4](homework/1_4.JPG)

Пытаемся задеплоить в Stack:

![1_5_1](homework/1_5_1.JPG)

![1_5_2](homework/1_5_2.JPG)

Получаем ошибку: "версия данного файла не поддерживается", продолжаем делать, как на семинаре.
Запускаем первый ДК-файл:

![1_7](homework/1_7.JPG)

Проверяем:

![1_8](homework/1_8.JPG)

![1_9](homework/1_9.JPG)

Запускаем второй ДК-файл:

![1_10_1](homework/1_10_1.JPG)

![1_10_1](homework/1_10_1.JPG)

![1_11](homework/1_11.JPG)

Воспользуемся функционалом Docker Swarm и создадим дубликат одного и того же образа:

![1_12](homework/1_12.JPG)

![1_13](homework/1_13.JPG)

Аналогично можем проделать с другими образами, далее повязать их сетью и получить полные дубликаты: БД + WEB.

**Второй вариант решение(с использованием второй node):**

Подключаемся по SSH ко второй VM и устанавливаем swarm соединение, предварительно инициализировав manager node:

![2_1](homework/2_1.JPG)

Запускаем первый ДК-файл на manager node:

![2_2](homework/2_2.JPG)

Проверяем:

![2_3](homework/2_3.JPG)

Запускаем второй ДК-файл на worker node:

![2_4](homework/2_4.JPG)

Проверяем:

![2_5](homework/2_5.JPG)

Попробуем запустить первый ДК-файл на node worker:

![2_6](homework/2_6.JPG)

Проверяем, все работает, ошибки дублирования не произошло т. к имена image разные(ДК-файлы в разных директориях 
находятся на VM)

![2_7](homework/2_7.JPG)

Запускаем на manager node второй ДК-файл и получаем четыре работающих контейнера на одной node и на другой
(не считая hello-word):

![2_8](homework/2_8.JPG)

![2_9](homework/2_9.JPG)

Если бы расположение папок было идентично на manager node и worker node, пришлось бы создавать реплики образов и 
обвязывать их сетью:

![2_10](homework/2_10.JPG)

Тем временем наблюдаем за статусом worker node, он "упал"(Отказался идти на повышение). Переподключаем swarm соединение:

![2_11](homework/2_11.JPG)

Создаем еще реплики образов и видим как система их перераспределяет:

![2_12](homework/2_11.JPG)

![2_13](homework/2_13.JPG)



*Подготовил студент GeekBrains* [**`Nikita Mashkin**]
